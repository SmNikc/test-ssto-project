# Руководство пользователя модуля «Тест ССТО»: Настройка уведомлений

## Введение
Модуль «Тест ССТО» поддерживает отправку уведомлений по email, SMS и Telegram, чтобы оперативно информировать пользователей о событиях (например, поступление тревожного сигнала). Этот раздел описывает, как настроить уведомления и проверить их работу.

## Доступ к настройкам уведомлений
1. **Войдите в систему**:
   - Авторизуйтесь через Keycloak с ролью «Администратор» или «Оперативный дежурный» (см. [Авторизация](#авторизация)).
   - Для дежурных доступ ограничен просмотром и использованием уведомлений, для администраторов — полная настройка.

2. **Откройте настройки**:
   - На главной странице нажмите на иконку профиля (в правом верхнем углу).
   - Выберите **"Управление уведомлениями"**.

**Скриншот**: Иконка профиля — круглая аватарка с инициалами. В выпадающем меню пункт «Управление уведомлениями» находится между «Профиль» и «Выход».

## Настройка уведомлений
1. **Выбор события**:
   - В разделе «Уведомления» выберите событие из списка:
     - **Получение тревожного сигнала**.
     - **Получение тестового сигнала**.
     - **Ошибка обработки сигнала**.
     - **Ежедневная сводка**.

2. **Выбор каналов**:
   - Отметьте каналы доставки:
     - **Email**: Укажите адрес (например, `operator@gmskcc.ru`).
     - **SMS**: Введите номер телефона (например, `+7 (495) 123-45-67`).
     - **Telegram**: Укажите Telegram ID (например, `123456789`).
   - Для каждого канала можно указать несколько получателей (например, несколько email-адресов через запятую).

3. **Текст уведомления**:
   - Введите текст сообщения (до 300 символов):
     - Пример для тревожного сигнала: `Тревожный сигнал MMSI 123456789 получен в 2025-05-29 19:04`.
     - Пример для сводки: `Ежедневная сводка: 5 сигналов обработано`.
   - Используйте плейсхолдеры: `{MMSI}`, `{TIME}`, `{TYPE}` (заменяются автоматически).

4. **Сохранение**:
   - Нажмите **"Сохранить"**.
   - Уведомления будут отправляться автоматически при наступлении события.

**Скриншот**: Форма «Управление уведомлениями» включает выпадающий список «Событие», флажки «Email», «SMS», «Telegram», поля для ввода получателей и текста, кнопку «Сохранить» (синяя).

## Проверка уведомлений
1. **Тестовое уведомление**:
   - В разделе «Управление уведомлениями» нажмите **"Отправить тестовое уведомление"**.
   - Выберите канал (например, Email).
   - Нажмите **"Отправить"**.
   - Проверьте, что уведомление получено (например, в почтовом ящике).

2. **Логи уведомлений**:
   - В разделе «Логи» (доступно администратору) просмотрите историю отправленных уведомлений:
     - Время отправки, канал, получатель, текст, статус (успешно/ошибка).

**Скриншот**: Раздел «Логи» содержит таблицу с колонками «Время», «Канал», «Получатель», «Текст», «Статус». Успешные уведомления отмечены зеленым, ошибки — красным.

## Устранение неполадок
- **Уведомление не отправляется**:
  - Проверьте настройки канала (SMTP, Twilio, Telegram API) в панели администратора.
  - Убедитесь, что данные получателя верны (email, номер телефона, Telegram ID).
  - Просмотрите логи для выявления ошибок.

- **Сообщение не доставлено**:
  - Для email: Проверьте папку «Спам».
  - Для SMS/Telegram: Убедитесь, что сервисы Twilio или Telegram API активны (попросите администратора проверить).

- **Текст уведомления обрезается**:
  - Убедитесь, что текст не превышает 300 символов.
  - Используйте плейсхолдеры для компактности.

**Совет**: Настройте уведомления для тревожных сигналов как приоритетные, чтобы оперативно реагировать на срочные события.
