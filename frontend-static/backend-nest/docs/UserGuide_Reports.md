# Руководство пользователя модуля «Тест ССТО»: Генерация отчетов

## Введение
Модуль «Тест ССТО» позволяет генерировать отчеты для мониторинга и анализа сигналов: суточные, недельные, месячные, индивидуальные, а также журнал тестирования и чеклист сценариев. Отчеты доступны в форматах PDF и Excel. Этот раздел описывает, как создавать и скачивать отчеты.

## Доступ к отчетам
1. **Войдите в систему**:
   - Авторизуйтесь через Keycloak с ролью «Оперативный дежурный» или «Судовладелец» (см. [Авторизация](#авторизация)).
   - После входа перейдите на страницу дашборда.

2. **Откройте раздел отчетов**:
   - На дашборде нажмите на вкладку **"Отчеты"** (вверху страницы).
   - Вы увидите список доступных типов отчетов.

**Скриншот**: Вкладка «Отчеты» находится рядом с вкладками «Дашборд» и «Карта». Страница отчетов содержит список с названиями отчетов: «Суточная сводка», «Недельный отчет», «Индивидуальный отчет» и т.д.

## Типы отчетов
1. **Суточная сводка**:
   - Содержит данные за последние 24 часа: количество сигналов, их типы, статусы.
   - Доступно для дежурных и администраторов.

2. **Недельный/месячный отчет**:
   - Агрегированные данные за неделю или месяц: общее число сигналов, статистика по типам, обработка.
   - Доступно для дежурных и администраторов.

3. **Индивидуальный отчет по MMSI/IMO**:
   - Подробный отчет для конкретного судна (например, MMSI `123456789`): все сигналы, заявки, статусы.
   - Доступно для судовладельцев и дежурных.

4. **Журнал тестирования и чеклист сценариев**:
   - Журнал: История тестовых сигналов и их обработки.
   - Чеклист: Список сценариев с результатами (ожидаемый/фактический).
   - Доступно для тестировщиков и администраторов.

**Скриншот**: Раздел отчетов отображает карточки с названиями отчетов. Каждая карточка включает описание («Суточная сводка: данные за 24 часа») и кнопку «Сгенерировать».

## Генерация отчета
1. **Выберите тип отчета**:
   - Нажмите на карточку нужного отчета (например, «Суточная сводка»).

2. **Укажите параметры**:
   - Для суточной сводки: Выберите дату (например, `2025-05-29`).
   - Для индивидуального отчета: Введите MMSI или IMO (например, `123456789`).
   - Для журнала/чеклиста: Выберите период и сценарии.

3. **Формат отчета**:
   - Выберите формат: PDF или Excel.
   - PDF: Используется pdfkit для форматированного документа.
   - Excel: Используется exceljs для табличного формата.

4. **Сгенерируйте отчет**:
   - Нажмите **"Сгенерировать"**.
   - После обработки отчет автоматически скачается на ваше устройство.

**Скриншот**: Форма генерации отчета включает поля «Дата» (для суточного отчета), «MMSI» (для индивидуального), выпадающий список «Формат» (PDF/Excel) и кнопку «Сгенерировать» (синяя).

## Примеры отчетов
- **Суточная сводка (PDF)**:
  - Заголовок: «Суточная сводка за 2025-05-29».
  - Таблица: «Тестовые сигналы: 10, Тревожные: 2, Внеплановые: 1».
  - Итог: «Обработано: 12, Отклонено: 1».

- **Индивидуальный отчет (Excel)**:
  - Колонки: MMSI, Тип сигнала, Время, Статус.
  - Пример строки: `123456789, Тревожный, 2025-05-29 19:04, Завершен`.

- **Журнал тестирования (PDF)**:
  - Заголовок: «Журнал тестирования за май 2025».
  - Таблица: «Сценарий: Тест сигнала, Ожидаемый: Принят, Фактический: Принят».

**Скриншот**: PDF-отчет содержит логотип ГМСКЦ, заголовок, таблицу с данными и подпись «Сгенерировано: 2025-05-29». Excel-отчет открывается в виде таблицы с цветными заголовками.

## Устранение неполадок
- **Отчет не генерируется**:
  - Проверьте, что параметры введены корректно (например, MMSI — 9 цифр).
  - Убедитесь, что сервер доступен (перезагрузите страницу).
  - Если ошибка повторяется, обратитесь к администратору.

- **Файл не скачивается**:
  - Проверьте настройки браузера (разрешите автоматическое скачивание).
  - Убедитесь, что на диске достаточно места.
  - Попробуйте другой формат (например, Excel вместо PDF).

- **Данные в отчете отсутствуют**:
  - Проверьте выбранный период: возможно, за указанный период нет сигналов.
  - Убедитесь, что сигналы обработаны (статус «Завершен»).

**Совет**: Сохраняйте отчеты в отдельной папке для удобного доступа и анализа.
