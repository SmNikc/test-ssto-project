# Руководство администратора модуля «Тест ССТО»: Управление пользователями

## Введение
Этот раздел описывает процесс управления пользователями в модуле «Тест ССТО» через Keycloak. Администратор может создавать учетные записи, назначать роли и управлять доступом.

## Доступ к Keycloak
1. Войдите в Keycloak:
    - Откройте http://localhost:8080/auth.
    - Используйте учетные данные администратора:
        Логин: admin
        Пароль: Admin@123 (или другой, указанный при установке).

2. Выберите realm:
    - Перейдите в realm `test-ssto` (см. [Настройка системы](#настройка-системы)).

## Создание пользователя
1. Перейдите в раздел «Users»:
    - В меню слева выберите «Users».
    - Нажмите «Add user».

2. Заполните данные:
    - Username: user1@gmskcc.ru
    - Email: user1@gmskcc.ru
    - First Name: Иван
    - Last Name: Иванов
    - Нажмите «Save».

3. Установите пароль:
    - Перейдите на вкладку «Credentials».
    - Нажмите «Set Password».
    - Введите временный пароль: Temp@123
    - Отключите «Temporary» (если не хотите, чтобы пользователь менял пароль при входе).
    - Нажмите «Set Password».

## Назначение роли
1. Перейдите на вкладку «Role Mappings»:
    - Выберите пользователя (например, user1@gmskcc.ru).

2. Назначьте роль:
    - Доступные роли: `shipowner`, `operator`, `admin`, `tester`.
    - В разделе «Client Roles» выберите `test-ssto-client`.
    - Выберите роль (например, `operator`).
    - Нажмите «Add selected».

## Управление доступом
1. Ограничение доступа:
    - Для роли `shipowner`:
        Доступ: Подача заявок, индивидуальные отчеты.
    - Для роли `operator`:
        Доступ: Дашборд, карта, обработка сигналов.
    - Для роли `admin`:
        Доступ: Полный, включая настройки системы.
    - Для роли `tester`:
        Доступ: Формы тестирования, журнал, чеклист.

2. Изменение роли:
    - В разделе «Role Mappings» удалите текущую роль.
    - Назначьте новую роль (например, замените `operator` на `admin`).

## Удаление пользователя
1. Найдите пользователя:
    - В разделе «Users» найдите пользователя (например, user1@gmskcc.ru).

2. Удалите:
    - Нажмите «Delete».
    - Подтвердите удаление.

## Устранение неполадок
- Пользователь не может войти:
    - Проверьте, активен ли пользователь (в разделе «Details» включите «Enabled»).
    - Убедитесь, что пароль установлен и не истек.
    - Проверьте назначенную роль.

- Роль не применяется:
    - Убедитесь, что роль назначена в `Client Roles` для `test-ssto-client`.
    - Перезапустите frontend: docker-compose restart frontend.

**Совет**: Ведите список пользователей и их ролей в отдельном документе для удобного управления.
