# Руководство пользователя модуля «Тест ССТО»: Просмотр и обработка сигналов

## Введение
Модуль «Тест ССТО» позволяет оперативным дежурным ГМСКЦ просматривать и обрабатывать сигналы, поступающие от судов. Система поддерживает автоматическую обработку сигналов через email (IMAP) и ручное создание сигналов. Этот раздел описывает, как просматривать сигналы, классифицировать их и выполнять ручную обработку.

## Доступ к сигналам
1. **Войдите в систему**:
   - Авторизуйтесь через Keycloak с ролью «Оперативный дежурный» (см. [Авторизация](#авторизация)).
   - После входа вы попадете на главную страницу с дашбордом.

2. **Откройте дашборд**:
   - На главной странице вы увидите дашборд с таблицей сигналов.
   - Таблица включает столбцы: MMSI, Тип сигнала, Время получения, Статус, Действия.

**Скриншот**: Дашборд содержит таблицу с заголовками столбцов «MMSI», «Тип сигнала», «Время получения», «Статус», «Действия». Каждая строка таблицы имеет цветовую индикацию: зеленый для тестовых сигналов, красный для тревожных.

## Просмотр сигналов
1. **Фильтрация сигналов**:
   - Используйте фильтры над таблицей:
     - **MMSI**: Введите MMSI для поиска (например, `123456789`).
     - **Тип сигнала**: Выберите из выпадающего списка: «Тестовый», «Тревожный», «Внеплановый».
     - **Период**: Укажите диапазон дат (например, с `2025-05-28` по `2025-05-30`).
   - Нажмите **"Применить"** для обновления таблицы.

2. **Сортировка**:
   - Нажмите на заголовок столбца (например, «Время получения»), чтобы отсортировать сигналы по возрастанию или убыванию.

3. **Детали сигнала**:
   - Нажмите на MMSI в строке таблицы, чтобы открыть подробности:
     - MMSI, тип сигнала, время получения, координаты (если доступны), статус, история обработки.
   - Для тревожных сигналов отображается дополнительное поле: «Срочность».

**Скриншот**: Окно деталей сигнала содержит поля «MMSI: 123456789», «Тип: Тревожный», «Время: 2025-05-30 10:00 UTC», «Координаты: 55.1234, 37.5678», «Статус: В обработке». Кнопка «Закрыть» внизу.

## Классификация сигналов
Сигналы классифицируются автоматически при получении через email (IMAP), но дежурный может изменить классификацию вручную.

1. **Автоматическая классификация**:
   - Система анализирует email (IMAP, адрес `od_smrcc@morflot.ru`):
     - **Тестовый**: Если в теме email указано «TEST» или MMSI связан с заявкой.
     - **Тревожный**: Если в теле email есть ключевые слова «ALERT», «EMERGENCY».
     - **Внеплановый**: Если сигнал не привязан к заявке и не классифицирован как тревожный.

2. **Ручная классификация**:
   - В таблице сигналов найдите строку с сигналом.
   - В столбце «Действия» нажмите **"Изменить"**.
   - В открывшемся окне выберите новый тип сигнала из выпадающего списка: «Тестовый», «Тревожный», «Внеплановый».
   - Нажмите **"Сохранить"**.

**Скриншот**: Окно редактирования сигнала включает поле «Тип сигнала» с выпадающим списком и кнопку «Сохранить» (синяя).

## Ручная обработка сигналов
Если сигнал не привязан к заявке или требует вмешательства, дежурный может обработать его вручную.

1. **Создание нового сигнала**:
   - На дашборде нажмите кнопку **"Добавить сигнал"** (вверху справа).
   - Заполните форму:
     - **MMSI***: Введите MMSI (например, `987654321`).
     - **Тип сигнала***: Выберите «Тестовый», «Тревожный» или «Внеплановый».
     - **Координаты**: Введите широту и долготу (например, `55.1234, 37.5678`), необязательно.
     - **Комментарий**: Добавьте заметки (например, `Получено по телефону`), до 300 символов.
   - Нажмите **"Создать"**.

2. **Привязка сигнала к заявке**:
   - В таблице сигналов найдите непривязанный сигнал (статус «Не привязан»).
   - В столбце «Действия» нажмите **"Привязать"**.
   - Выберите заявку из списка (например, заявка с MMSI `987654321`).
   - Нажмите **"Сохранить"**.

3. **Обновление статуса**:
   - В таблице сигналов выберите сигнал.
   - В столбце «Действия» нажмите **"Обновить статус"**.
   - Выберите новый статус: «В обработке», «Завершен», «Отклонен».
   - Добавьте комментарий (например, `Сигнал обработан успешно`).
   - Нажмите **"Сохранить"**.

**Скриншот**: Форма создания сигнала включает поля «MMSI», «Тип сигнала», «Координаты», «Комментарий» и кнопку «Создать» (синяя). Список заявок для привязки отображается в виде таблицы с MMSI и датой.

## Устранение неполадок
- **Сигнал не отображается в таблице**:
  - Проверьте фильтры: возможно, сигнал отфильтрован по MMSI, типу или дате.
  - Убедитесь, что email-сервер (IMAP) доступен. Если нет, обратитесь к администратору.

- **Ошибка при привязке сигнала**:
  - Проверьте, существует ли заявка с указанным MMSI.
  - Если заявка отсутствует, создайте новую заявку (см. [Подача заявки](#подача-заявки-на-тестирование)).

- **Сигнал классифицирован неверно**:
  - Измените тип сигнала вручную (см. «Ручная классификация»).
  - Если ошибка повторяется, проверьте настройки IMAP (ключевые слова для классификации).

**Совет**: Ведите записи о внеплановых сигналах в отдельном журнале, чтобы отслеживать их происхождение.
